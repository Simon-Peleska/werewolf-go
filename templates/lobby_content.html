<div class="game-content" id="game-content" hx-swap="innerHTML" hx-swap-oob="true">
    <div id="status-bar" class="status-bar">
        <span><strong>Players:</strong> {{.PlayerCount}}</span>
        <span><strong>Roles:</strong> {{.TotalRoles}}</span>
        <span id="status-message" class="status-msg">
            {{if .CanStart}}
                Ready to start!
            {{else if gt .TotalRoles .PlayerCount}}
                Need {{subtract .TotalRoles .PlayerCount}} more players
            {{else if lt .TotalRoles .PlayerCount}}
                Need {{subtract .PlayerCount .TotalRoles}} more roles
            {{else if eq .TotalRoles 0}}
                Configure roles below
            {{end}}
        </span>
    </div>

    <section>
        <h2>Roles</h2>
        <p><small>Select which roles and how many of each to include in the game.</small></p>

        {{range .RoleConfigs}}
        <div id="role-{{.Role.ID}}" class="role-card role-team-{{.Role.Team}}">
            <img class="icon icon-md" src="{{ roleIcon .Role.Name }}" alt="{{.Role.Name}}">
            <div class="role-card-info">
                <strong>{{.Role.Name}}</strong>
                <small>{{.Role.Description}}</small>
            </div>
            <div class="role-card-controls">
                <form ws-send style="display:contents">
                    <input type="hidden" name="action" value="update_role">
                    <input type="hidden" name="role_id" value="{{.Role.ID}}">
                    <input type="hidden" name="delta" value="-1">
                    <button type="submit" id="btn-remove-{{.Role.ID}}" {{if eq .Count 0}}disabled{{end}}>âˆ’</button>
                </form>
                <span id="count-{{.Role.ID}}" class="role-count">{{.Count}}</span>
                <form ws-send style="display:contents">
                    <input type="hidden" name="action" value="update_role">
                    <input type="hidden" name="role_id" value="{{.Role.ID}}">
                    <input type="hidden" name="delta" value="1">
                    <button type="submit" id="btn-add-{{.Role.ID}}" {{if ge $.TotalRoles $.PlayerCount}}disabled{{end}}>+</button>
                </form>
            </div>
        </div>
        {{end}}
    </section>

    <hr>

    <section>
        <form ws-send>
            <input type="hidden" name="action" value="start_game">
            <button type="submit" id="btn-start" {{if not .CanStart}}disabled{{end}}>
                Start Game
            </button>
        </form>
    </section>
</div>
